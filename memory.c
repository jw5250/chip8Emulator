#ifndef MEMORY_C_INCLUDED
#define MEMORY_C_INCLUDED
#include "memory.h"
#include "dataType.h"
#include <stdlib.h>
#define MEMSIZE 4096
#define FONT_BYTE_LENGTH 80

//memory array will be moved into the memory.c file once I finish testing all of the instructions.
byte* memory;

	//Data represents 4x5 sprites from 0 to F.
byte fontData[FONT_BYTE_LENGTH] = {
				0xF0, 0x90, 0x90, 0x90, 0xF0, //0
				0x20, 0x60, 0x20, 0x20, 0x70, //1
				0xF0, 0x10, 0xF0, 0x80, 0xF0, //2
				0xF0, 0x10, 0xF0, 0x10, 0xF0, //3
				0x90, 0x90, 0xF0, 0x10, 0x10, //4
				0xF0, 0x80, 0xF0, 0x10, 0xF0, //5
				0xF0, 0x80, 0xF0, 0x90, 0xF0, //6
				0xF0, 0x10, 0x20, 0x40, 0x40, //7
				0xF0, 0x90, 0xF0, 0x90, 0xF0, //8
				0xF0, 0x90, 0xF0, 0x10, 0xF0, //9
				0xF0, 0x90, 0xF0, 0x90, 0x90, //A
				0xE0, 0x90, 0xE0, 0x90, 0xE0, //B
				0xF0, 0x80, 0x80, 0x80, 0xF0, //C
				0xE0, 0x90, 0x90, 0x90, 0xE0, //D
				0xF0, 0x80, 0xF0, 0x80, 0xF0, //E
				0xF0, 0x80, 0xF0, 0x80, 0x80  //F
				};
int initMemory(){
	memory = (byte*)malloc(MEMSIZE*sizeof(byte));

	if(memory == NULL){
		return memory != NULL;
	}
	for(int i = 0; i < MEMSIZE;i++){
		memory[i] = 0;
	}
	//Reserve first 180 bytes of memory to font data.
	for(int i = 0; i < FONT_BYTE_LENGTH; i++){
		memory[i] = fontData[i];
	}
	return memory != NULL;
}

void freeMemory(){
	free(memory);
	memory = NULL;
}

int memoryExists(){
	return memory != NULL;
}
byte readMemory(register int address){
	return memory[address];
}
void writeMemory(register word address, register byte value){
	memory[address.WORD] = value;
}
#endif
